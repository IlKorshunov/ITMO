## Хранимые процедуры

В базе данных `Airline` информация о рейсах самолётов задана в виде таблиц

```sql
    Flights(
        FlightId integer,
        FlightTime timestamp,
        PlaneId integer,
        -- Дополнительные столбцы, при необходимости
    )
    Seats(
        PlaneId integer,
        SeatNo varchar(4), -- 123A
        -- Дополнительные столбцы, при необходимости
    )
```

Реализуйте запросы к базе данных Airline с применением представлений, хранимых процедур и функций. При необходимости, вы можете создать дополнительные таблицы, представления и хранимые процедуры.

Возможность бронирования должна автоматически отключаться за трое суток до начала рейса. Продажа мест должна автоматически отключаться за три часа до начала рейса. Также должна быть предусмотрена возможность отключения бронирования и продаж вручную.

**1. Администрирование.**  
- RegisterUser(UserId, Pass) — зарегистрировать нового пользователя. Возвращает истину, если удалось и ложь — в противном случае.  
- ManageFlight(UserId, Pass, FlightId, SellAllowed, ReservationAllowed) — изменить настройки рейса. Примечание: автоматические настройки имеют более высокий приоритет.

**2. Покупка и бронирование.**  
- FreeSeats(FlightId) — список мест рейса, доступных для продажи и для бронирования.  
- Reserve(UserId, Pass, FlightId, SeatNo) — бронирует место на сутки начиная с момента бронирования. Возвращает истину, если удалось и ложь — в противном случае.  
- ExtendReservation(UserId, Pass, FlightId, SeatNo) — продлевает бронь места на сутки начиная с момента продления. Возвращает истину, если удалось и ложь — в противном случае.  
- BuyFree(FlightId, SeatNo) — покупает свободное место. Возвращает истину, если удалось и ложь — в противном случае.  
- BuyReserved(UserId, Pass, FlightId, SeatNo) — покупает забронированное место (пользователи должны совпадать). Возвращает истину, если удалось и ложь — в противном случае.

**3. Статистика.**  
- FlightsStatistics(UserId, Pass) — статистика по рейсам: возможность бронирования и покупки, число свободных, забронированных и проданных мест.  
- FlightStat(UserId, Pass, FlightId) — статистика по рейсу: возможность бронирования и покупки, число свободных, забронированных и проданных мест.